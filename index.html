<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>OmniRevolve</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="OmniRevolve — XY plotter with 4-color carousel: STM32F446 + ESP32 (micro-ROS) + ROS 2 UI.; deterministic 10 kHz control loop (TIM4 ISR)." />
  <link rel="stylesheet" href="assets/styles.css" />
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({ startOnLoad: true, theme: "dark" });
  </script>
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="tag">Robotics • Embedded • ROS 2</div>
      <h1>OmniRevolve</h1>
      <div class="btns">
        <a class="btn" href="https://github.com/omnirevolve">GitHub Organization</a>
        <a class="btn" href="https://github.com/omnirevolve/omnirevolve">Umbrella Repository</a>
      </div>
    </header>

    <section class="hero">
      <p><strong>XY plotter (scalable to 15 colors)</strong> — STM32F446 with a <strong>deterministic 10&nbsp;kHz control loop (TIM4 ISR)</strong> driving multi-axis step generation, endstop handling, homing/calibration, <strong>stream timing and an action FSM</strong> (tap, color change, pen up/down); ESP32 (FreeRTOS + micro-ROS over Wi‑Fi), ROS&nbsp;2 UI, SPI DMA 512&nbsp;B streaming, CRC protocol.</p>

      <h2>System Architecture</h2>
      <div class="mermaid">
flowchart LR
  subgraph PC
    UI["ROS 2 UI (Tkinter)"]
    Agent["micro-ROS Agent (UDP)"]
  end

  subgraph ESP32
    MROS["micro-ROS Node / FreeRTOS"]
    OLED1["OLED SSD1309"]
  end

  subgraph STM32
    MCU["STM32F446 (NUCLEO-F446RE)"]
    TIM4["TIM4 @ 10 kHz - step generation"]
    OLED2["OLED SSD1309"]
    Endstops["Hall + mechanical endstops"]
  end

  subgraph Mechanics
    TB6600["TB6600 drivers"]
    NEMA["NEMA17 steppers (X/Y/pen conveyor/carousel)"]
    Head["Carousel + Z carriage + Pen conveyor"]
  end

  UI -- "/plotter/byte_stream + cmds" --> MROS
  MROS -- "SPI DMA: 512 B chunks" --> MCU
  MCU -- "UART status/CRC" --> MROS
  MROS -- "/plotter/telemetry" --> UI
  MCU --> TIM4
  MCU --> Endstops
  MCU --> OLED2
  MROS --> OLED1
  MCU --> TB6600 --> NEMA
  NEMA --> Head
      </div>

      <h2>Highlights</h2>
      <ul>
        <li>Deterministic <strong>10&nbsp;kHz control loop (TIM4 ISR)</strong>: multi-axis steps, endstops, homing/calibration, <strong>stream timing & action FSM</strong> (tap / color change / pen up-down).</li>
        <li>Reliable SPI DMA streaming (512&nbsp;B, double buffering) and CRC-based UART control/status.</li>
        <li>ESP32 micro-ROS over Wi-Fi; ROS&nbsp;2 UI with live preview and progress (<code>bytes_processed</code>).</li>
        <li>STM32 firmware refactored C → C++ with clear module boundaries.</li>
      </ul>
    </section>

    <section style="margin-top:16px">
      <h2>Public Repositories</h2>
      <div class="grid">
        <div class="card">
          <h3><a href="https://github.com/omnirevolve/omnirevolve-stm32-firmware">stm32-firmware</a></h3>
          <p>STM32F446 firmware (TIM4@10kHz, SPI DMA RX, UART CRC, SSD1309).</p>
        </div>
        <div class="card">
          <h3><a href="https://github.com/omnirevolve/omnirevolve-esp32-microros">esp32-microros</a></h3>
          <p>ESP32 micro-ROS bridge: ROS&nbsp;2 stream → SPI DMA → STM32; telemetry.</p>
        </div>
        <div class="card">
          <h3><a href="https://github.com/omnirevolve/omnirevolve-esp32-core">esp32-core</a></h3>
          <p>OLED status, keypad, UART (CRC) to STM32; components and drivers.</p>
        </div>
        <div class="card">
          <h3><a href="https://github.com/omnirevolve/omnirevolve-ros2-ui">ros2-ui</a></h3>
          <p>PC UI (Tkinter): send stream, control, live preview, progress.</p>
        </div>
        <div class="card">
          <h3><a href="https://github.com/omnirevolve/omnirevolve-ros2-messages">ros2-messages</a></h3>
          <p>Shared ROS&nbsp;2 messages (e.g., <code>PlotterTelemetry</code>).</p>
        </div>
        <div class="card">
          <h3><a href="https://github.com/omnirevolve/omnirevolve-image-processor">image-processor</a></h3>
          <p>Image → contours → plotter byte stream.</p>
        </div>
        <div class="card">
          <h3><a href="https://github.com/omnirevolve/omnirevolve-protocol">protocol</a></h3>
          <p>Binary protocol &amp; defines (service/step bytes, EOF=0x3F).</p>
        </div>
      </div>
    </section>

    <section style="margin-top:16px">
      
      <section style="margin-top:16px">
        <h2>Photos</h2>
        <div style="display:flex;flex-direction:column;align-items:center;gap:18px">
          <figure style="margin:0;text-align:center;max-width:980px;width:100%">
            <img src="docs/media/plotter.jpg" alt="OmniRevolve plotter hardware" style="width:100%;height:auto;border-radius:8px;">
            <figcaption style="margin-top:8px;color:#666">OmniRevolve plotter — 4-color carousel (mechanically scalable to 15 colors)</figcaption>
          </figure>
          <div style="display:flex;flex-wrap:wrap;justify-content:center;gap:14px;max-width:980px;width:100%">
            <figure style="flex:1 1 360px;max-width:480px;margin:0;text-align:center">
              <img src="docs/media/result.jpg" alt="Sample output #1" style="width:100%;height:auto;border-radius:8px;">
              <figcaption style="margin-top:8px;color:#666">Sample output #1</figcaption>
            </figure>
            <figure style="flex:1 1 360px;max-width:480px;margin:0;text-align:center">
              <img src="docs/media/result-2.jpg" alt="Sample output #2" style="width:100%;height:auto;border-radius:8px;">
              <figcaption style="margin-top:8px;color:#666">Sample output #2</figcaption>
            </figure>
          </div>
        </div>
      </section>

      <h2>Videos</h2>
      <p>Timelapse demo #1, pen carousel change, and full process (PC + hardware + plotting):</p>
      <p style="text-align:center">
        <a href="https://www.youtube.com/watch?v=epHM4n3US48" style="display:inline-block;margin:4px">
          <img src="https://img.youtube.com/vi/epHM4n3US48/hqdefault.jpg" alt="Timelapse demo #1 (printing)" style="width:32%;min-width:220px;max-width:360px">
        </a>
        <a href="https://www.youtube.com/watch?v=NMgnAYHxDm4" style="display:inline-block;margin:4px">
          <img src="https://img.youtube.com/vi/NMgnAYHxDm4/hqdefault.jpg" alt="Pen carousel change" style="width:32%;min-width:220px;max-width:360px">
        </a>
        <a href="https://www.youtube.com/watch?v=BMJWWeqkJn0" style="display:inline-block;margin:4px">
          <img src="https://img.youtube.com/vi/BMJWWeqkJn0/hqdefault.jpg" alt="Full process: PC + hardware + plotting" style="width:32%;min-width:220px;max-width:360px">
        </a>
      </p>

    
    <section style="margin-top:16px">
      <h2>Contact</h2>
      <p>Questions or collaboration proposals: <a href="mailto:userofbgtu@gmail.com">userofbgtu@gmail.com</a></p>
    </section>
</section>

    <p>© OmniRevolve. MIT license. </p>


  </div>
</body>
</html>
